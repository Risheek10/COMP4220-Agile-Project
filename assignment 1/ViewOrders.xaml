<Window x:Class="BookStoreGUI.OrdersWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Your Orders" Height="600" Width="800">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Orders" FontWeight="Bold" FontSize="14" Margin="0,0,0,8"/>

        <ListBox Grid.Row="1" ItemsSource="{Binding Orders}" Name="ordersList" 
                 HorizontalContentAlignment="Stretch" BorderThickness="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="#DDD" BorderThickness="1" Padding="8" Margin="0,0,0,8" CornerRadius="4">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock Text="Order #" FontWeight="Bold"/>
                                <TextBlock Text="{Binding OrderID}" Margin="6,0"/>
                                <TextBlock Text="Date:" Margin="12,0,0,0" />
                                <TextBlock Text="{Binding OrderDate, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" Margin="6,0"/>
                                <TextBlock Text="Status:" Margin="12,0,0,0" />
                                <TextBlock Text="{Binding Status}" Margin="6,0"/>
                                <TextBlock Text="Discount:" Margin="12,0,0,0"/>
                                <TextBlock Text="{Binding DiscountPercent}" Margin="6,0"/>
                            </StackPanel>

                            <DataGrid ItemsSource="{Binding Items}" AutoGenerateColumns="False" 
                                      IsReadOnly="True" CanUserResizeRows="False" Margin="0,8,0,0"
                                      HeadersVisibility="Column" RowHeight="26">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ISBN" Binding="{Binding ISBN}" Width="Auto" MinWidth="200" />
                                    <DataGridTextColumn Header="Quantity" Binding="{Binding Quantity}" Width="1*" MinWidth="80" />

                                    <DataGridTemplateColumn Header=" " Width="120">
                                        <DataGridTemplateColumn.CellStyle>
                                            <Style TargetType="DataGridCell">
                                                <Setter Property="BorderBrush" Value="Transparent"/>
                                                <Setter Property="BorderThickness" Value="0"/>
                                                <Setter Property="Background" Value="Transparent"/>
                                                <Setter Property="Padding" Value="0"/>
                                                <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
                                            </Style>
                                        </DataGridTemplateColumn.CellStyle>

                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <Button Content="Details"
                                                        Padding="6,2"
                                                        CommandParameter="{Binding ISBN}"
                                                        Click="Details_Click"/>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>

                                </DataGrid.Columns>
                            </DataGrid>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Width="80" Margin="4,0,0,0" Click="Close_Click">Close</Button>
        </StackPanel>
    </Grid>
</Window>